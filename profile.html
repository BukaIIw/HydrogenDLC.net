<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ü—Ä–æ—Ñ–∏–ª—å</title>
<style>
  body {
    background:#121212;
    color:#fff;
    font-family:Arial, sans-serif;
    text-align:center;
  }
  .box {
    margin:120px auto;
    width:400px;
    padding:20px;
    background:#1e1e1e;
    border-radius:12px;
    box-shadow:0 0 15px rgba(0,0,0,0.5);
  }
  h2 {margin-bottom:20px;}
  p {margin:6px 0; font-size:16px;}
  .ok {color:lightgreen; font-weight:bold;}
  .bad {color:red; font-weight:bold;}
  button {
    padding:10px 20px;
    margin-top:15px;
    background:#6A5ACD;
    color:white;
    border:none;
    border-radius:6px;
    cursor:pointer;
    font-weight:bold;
  }
  button:hover {background:#5848c2;}
</style>
</head>
<body>
  <div class="box">
    <h2>üë§ –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
    <p><b>–õ–æ–≥–∏–Ω:</b> <span id="login"></span></p>
    <p><b>–ò–º—è:</b> <span id="username"></span></p>
    <p><b>ID:</b> <span id="ident"></span></p>
    <p><b>–ü–∞–º—è—Ç—å:</b> <span id="mem"></span></p>
    <p><b>–ü–æ–¥–ø–∏—Å–∫–∞:</b> <span id="sub"></span></p>
    <p><b>–î–æ—Å—Ç—É–ø –∫ —Å–∫–∞—á–∏–≤–∞–Ω–∏—é:</b> <span id="can"></span></p>
    <button onclick="logout()">‚¨Ö –í—ã–π—Ç–∏</button>
  </div>

<script>
const user = JSON.parse(localStorage.getItem("currentUser")||"{}");

// –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω ‚Üí –Ω–∞–∑–∞–¥
if(!user.login){ window.location="index.html"; }

// –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
document.getElementById("login").innerText = user.login;
document.getElementById("username").innerText = user.username;
document.getElementById("ident").innerText = user.ident;
document.getElementById("mem").innerText = user.mem;

// --- –ø–æ–¥–ø–∏—Å–∫–∞ ---
const subElem = document.getElementById("sub");
if(user.sub && user.sub !== "-" && isActiveSub(user.sub)){
  subElem.innerText = "‚úÖ –∞–∫—Ç–∏–≤–Ω–∞ –¥–æ " + user.sub;
  subElem.className = "ok";
} else {
  subElem.innerText = "‚õî –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–µ –≤—ã–¥–∞–Ω–∞ –∏–ª–∏ –∏—Å—Ç–µ–∫–ª–∞";
  subElem.className = "bad";
}

// --- —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ ---
const canElem = document.getElementById("can");
if(user.can_download){
  canElem.innerText = "‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω–æ";
  canElem.className = "ok";
} else {
  canElem.innerText = "‚ùå –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞";
  canElem.className = "bad";
}

// --- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞—Ç—ã –ø–æ–¥–ø–∏—Å–∫–∏ ---
function isActiveSub(dateStr){
  try {
    let exp = new Date(dateStr);
    let now = new Date();
    return exp >= now;
  } catch(e){ return false; }
}

// --- –í—ã—Ö–æ–¥ ---
function logout(){
  localStorage.removeItem("currentUser");
  window.location="index.html";
}
</script>
</body>
</html>

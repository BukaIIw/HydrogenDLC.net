<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Вход</title>
<style>
  body {background:#121212;color:#fff;font-family:Arial;text-align:center;}
  .box {margin:120px auto;width:350px;padding:25px;background:#1e1e1e;border-radius:12px;}
  input,button{width:90%;padding:10px;margin:10px 0;border-radius:6px;border:none;}
  input{background:#2a2a2a;color:#fff;}
  button{background:#6A5ACD;color:#fff;font-weight:bold;cursor:pointer;}
  #error{color:red;}
</style>
</head>
<body>
  <div class="box">
    <h2>Добро пожаловать</h2>
    <input id="login" type="text" placeholder="Логин"><br>
    <input id="password" type="password" placeholder="Пароль"><br>
    <button onclick="auth()">Войти</button>
    <p id="error"></p>
  </div>

<script>
  // demo-пользователи по умолчанию
  let users = JSON.parse(localStorage.getItem("users")) || [
    {login:"admin", password:"1234", username:"Administrator", sub:"-", mem:"16384Mb", ident:"1", can_download:true},
    {login:"user", password:"pass", username:"TestUser", sub:"-", mem:"4096Mb", ident:"2", can_download:false}
  ];
  localStorage.setItem("users", JSON.stringify(users));

  function auth(){
    const login = document.getElementById("login").value.trim();
    const pass  = document.getElementById("password").value.trim();
    const user = users.find(u=>u.login===login && u.password===pass);

    if(user){
      localStorage.setItem("currentUser", JSON.stringify(user));
      if(user.login==="admin") window.location="admin.html";
      else window.location="profile.html";
    } else {
      document.getElementById("error").innerText="❌ Неверный логин или пароль";
    }
  }
</script>
</body>
</html>

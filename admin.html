<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>
<style>
  body {background:#121212;color:white;font-family:Arial;}
  h2 {text-align:center;margin-top:20px;}
  table {margin:20px auto;border-collapse:collapse;width:95%;}
  th,td{border:1px solid #555;padding:6px;text-align:center;}
  th{background:#333;}
  input{width:100%;background:#1c1c1c;color:white;border:none;padding:4px;}
  button{margin:5px;padding:6px 12px;border:none;border-radius:4px;background:#6A5ACD;color:white;cursor:pointer;}
  .del{background:#b33;}
  .add{background:#3a7;}
</style>
</head>
<body>
  <h2>⚙ Панель администратора</h2>
  <table id="table"><thead>
    <tr>
      <th>Login</th><th>Password</th><th>Username</th><th>Mem</th><th>Sub</th><th>can_download</th><th>ID</th><th>Удалить</th>
    </tr>
  </thead><tbody></tbody></table>

  <div style="text-align:center;">
    <input id="newLogin" placeholder="Login">
    <input id="newPass" placeholder="Password">
    <input id="newUser" placeholder="Username">
    <button class="add" onclick="addUser()">➕ Добавить</button>
    <button onclick="goOut()">⬅ Выйти</button>
  </div>

<script>
let users = JSON.parse(localStorage.getItem("users")) || [];

function renderUsers(){
  const tbody=document.querySelector("#table tbody");
  tbody.innerHTML="";
  users.forEach((u,i)=>{
    const tr=document.createElement("tr");
    tr.innerHTML=`
      <td><input value="${u.login}" onchange="edit(${i},'login',this.value)"></td>
      <td><input value="${u.password}" onchange="edit(${i},'password',this.value)"></td>
      <td><input value="${u.username}" onchange="edit(${i},'username',this.value)"></td>
      <td><input value="${u.mem}" onchange="edit(${i},'mem',this.value)"></td>
      <td><input value="${u.sub}" onchange="edit(${i},'sub',this.value)"></td>
      <td><input value="${u.can_download}" onchange="edit(${i},'can_download',this.value==='true')"></td>
      <td>${u.ident}</td>
      <td><button class="del" onclick="delUser(${i})">❌</button></td>
    `;
    tbody.appendChild(tr);
  });
  localStorage.setItem("users", JSON.stringify(users));
}

function edit(i,key,value){ users[i][key]=value; localStorage.setItem("users",JSON.stringify(users)); }
function delUser(i){ users.splice(i,1); localStorage.setItem("users",JSON.stringify(users)); renderUsers(); }
function addUser(){
  let id=users.length+1;
  users.push({
    login:document.getElementById("newLogin").value||"newuser"+id,
    password:document.getElementById("newPass").value||"1234",
    username:document.getElementById("newUser").value||"User"+id,
    mem:"1024Mb",
    sub:"-",
    ident:String(id),
    can_download:false
  });
  localStorage.setItem("users",JSON.stringify(users));
  renderUsers();
}
function goOut(){ window.location="index.html"; }

renderUsers();
</script>
</body>
</html>
